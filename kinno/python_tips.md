# Python tips

はえ〜ってなったtipsを書いていきます．基本的にバージョンは3.5以上です．

## Python実行後にkilled: 9と表示される

Pythonスクリプトがメモリリークを起こしていることが原因である．  
発生箇所を特定して，省メモリになるように変更を加えるか，明示的なメモリ開放を行う必要がある．

### 方法1 巨大なシーケンシャルデータはジェネレータとして扱う

巨大なデータを一度に読み出すとメモリを異常に圧迫してしまう．対象データをジェネレータとして扱うことで，データを一度にメモリに確保しなくなるので省メモリで実行できる．

### 方法2 明示的にメモリを開放する

本来はガベージコレクタという機能によって不要なオブジェクトが専有しているメモリを自動で開放してくれるが，まれにオブジェクトがメモリに残り続けることがある．Graphillionがその最たる例で，直前の操作が現在の操作に影響を及ぼしてしまう場合がある．こういった場合には明示的なメモリを行うことでkilled: 9のエラーを回避できる（かもしれない）．  

明示的なメモリ解放には`gc`モジュールを使用する．

```python
import gc

del obj # 削除したいオブジェクトを指定する
gc.collect()
```
